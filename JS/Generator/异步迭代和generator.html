<body>
    
</body>
<script>

    //=== 可迭代的 range 的一个实现=============================
    // let range = {
    //     from: 1,
    //     to: 5,

    //     [Symbol.iterator]() {
    //         return {
    //             current: this.from,
    //             last: this.to,

    //             next() {
    //                 if (this.current <= this.last) {
    //                     return {
    //                         done: false,
    //                         value: this.current++
    //                     };
    //                 } else {
    //                     return { done: true };
    //                 }
    //             }
    //         };
    //     }
    // };

    // for (const value of range) {
    //     alert(value);
    // }


    //=== 异步可迭代 range 的实现==============================
    // let range = {
    //     from: 1,
    //     to: 5,

    //     [Symbol.asyncIterator]() {
    //         return {
    //             current: this.from,
    //             last: this.to,

    //             async next() {
    //                 await new Promise(resolve => setTimeout(resolve, 1000));

    //                 if (this.current <= this.last) {
    //                     return { done: false, value: this.current++ };
    //                 } else {
    //                     return { done: true };
    //                 }
    //             }
    //         };
    //     }
    // };

    // (async () => {
    //     for await (const value of range) {
    //         alert(value);
    //     }
    // })


    //=== 异步可迭代对象 =====================================
    // let range = {
    //     from: 1,
    //     to: 5,

    //     [Symbol.asyncIterator]() {
    //         return {
    //             current: this.from,
    //             last: this.to,

    //             async next() {
    //                 await new Promise(resolve => setTimeout(resolve, 1000));

    //                 if (this.current <= this.last) {
    //                     return { done: false, value: this.current++ };
    //                 }else {
    //                     return {done: true};
    //                 }
    //             }
    //         };
    //     }
    // };

    // (async () => {
    //     for await (const value of range) {
    //         alert(value);
    //     }
    // })


    //=== 回顾 generator =====================================
    // function* generateSequence(start, end) {
    //     for (let i = start; i <= end; i++) {
    //         yield i;
    //     }
    // }

    // for (const value of generateSequence(1, 5)) {
    //     alert(value);
    // }


    //=== Symbol.iterator ====================================
    // let range = {
    //     from:1,
    //     to:5,
    //     *[Symbol.iterator]() {
    //         for(let value = this.from; value <= this.to; value++) {
    //             yield value;
    //         }
    //     }
    // };
    // for (const value of range) {
    //     alert(value);
    // }


    //=== 异步 generator ==================================
    // async function* generateSequence(start, end) {
    //     for (let i = start; i <= end; i++) {
    //         await new Promise(resolve => setTimeout(resolve, 1000));

    //         yield i;
    //     }
    // }

    // (async () => {
    //     let generator = generateSequence(1, 5);
    //     for await (let value of generator) {
    //         alert(value);
    //     }
    // })();


    //=== 异步的可迭代对象 range ================================
    let range = {
        from: 1,
        to: 5,

        async *[Symbol.asyncIterator]() {
            for (let value = this.from; value <= this.to; value++) {

                await new Promise(resolve => setTimeout(resolve, 1000));

                yield value;
            }
        }
    };

    (async () => {
        for await (let value of range) {
            alert(value);
        }
    })();
</script>